🚀 LLM-MOB PRODUCTION RUN - TUTTI GLI UTENTI
=============================================
Job ID: 19245755
Nodo: lrdn2926.leonardo.local
Data: Thu Aug 21 15:52:35 CEST 2025
💡 MODALITÀ: Processamento completo senza limiti utenti

📦 Caricamento moduli e ambiente...
Loading python/3.11.6--gcc--8.5.0
  Loading requirement: bzip2/1.0.8-gp5wcz5 libmd/1.0.4-wja3f5q
    libbsd/0.11.7-cgxjopl expat/2.5.0-bptl3xw ncurses/6.4-asx3jea
    readline/8.2-nyw6mp6 gdbm/1.23-fs6otck libiconv/1.17-d7yvx2s
    xz/5.4.1-hubmwr5 zlib-ng/2.1.4-6htiapk libxml2/2.10.3-5eeeokp
    pigz/2.7-bopr5vp zstd/1.5.5-gawytfl tar/1.34-amqus5s gettext/0.22.3-2g7elif
    libffi/3.4.4-6r7brdq libxcrypt/4.4.35-ss2rzin sqlite/3.43.2
    util-linux-uuid/2.38.1-jkdi7kv
✓ Python: Python 3.11.6
✓ Virtual env: /leonardo_work/IscrC_LLM-Mob/venv
✓ CUDA: Cuda compilation tools, release 12.3, V12.3.103

🔍 INFO GPU:
name, memory.total [MiB], memory.used [MiB], utilization.gpu [%], temperature.gpu
NVIDIA A100-SXM-64GB, 65536 MiB, 2 MiB, 0 %, 43
CUDA_VISIBLE_DEVICES: 0

⚙️  Configurazione Ollama...
✓ Versione Ollama: 0.3.14

🚀 Avvio server Ollama per produzione...
✓ Porta server: 39003
🧹 Pulizia processi precedenti...
✓ Server PID: 1312585
✓ Log file: ollama_production.log

⏳ Attesa avvio server (max 60s)...
   ⏱️  Attesa... (20s) - controllo log:
     [GIN] 2025/08/21 - 15:53:49 | 200 |  1.273008728s |       127.0.0.1 | POST     "/api/chat"
     [GIN] 2025/08/21 - 15:53:49 | 200 |    8.362157ms |       127.0.0.1 | GET      "/api/tags"
✅ Server operativo dopo 30s

🔥 Preparazione modello per produzione...
📋 Modelli disponibili:
  ✓ deepseek-coder:33b
  ✓ mixtral:8x7b
  ✓ llama3.1:8b
✅ Modello mixtral:8x7b disponibile

🎯 AVVIO PRODUZIONE - PROCESSAMENTO COMPLETO
=============================================
✅ Configurazione produzione attiva
📊 Nessun limite utenti - processamento completo
⏱️  Tempo stimato: variabile (dipende dai dati)
🔄 Retry automatici: 5 tentativi per richiesta

📦 Verifica dipendenze Python...
📁 Directory risultati: /leonardo_work/IscrC_LLM-Mob/LLM-Mob-As-Mobility-Interpreter/results/
🚀 AVVIO SCRIPT PRODUZIONE...
📝 Log dettagliato disponibile in tempo reale

2025-08-21 15:55:56,614 WARNING: ⚠️ Timeout tentativo 1/3
2025-08-21 15:56:50,937 INFO: ✅ Ollama test passed - Response: 'Hello'
2025-08-21 15:56:50,948 INFO: 🎯 Processamento file singolo: veronacard_2022_original.csv
2025-08-21 15:56:50,948 INFO: 📍 Path completo: /leonardo_work/IscrC_LLM-Mob/LLM-Mob-As-Mobility-Interpreter/data/verona/veronacard_2020_2023/veronacard_2022_original.csv
2025-08-21 15:56:50,953 INFO:  Output esistente per veronacard_2022_original. Usa --force o --append.
2025-08-21 15:56:50,953 INFO: ✅ Processamento completato per veronacard_2022_original.csv
👉 Porta letta da ollama_port.txt: '39003'
👉 Provo a contattare http://127.0.0.1:39003/api/tags
📂 Working dir: /leonardo_work/IscrC_LLM-Mob/LLM-Mob-As-Mobility-Interpreter
📄 Contenuto di ollama_port.txt: '39003'
🔄 Attesa Ollama su http://127.0.0.1:39003...
✓ Ollama risponde con status 200
✓ Runner LLaMA completamente attivo
🎉 Connessione Ollama stabilita con successo!

🎉 PRODUZIONE COMPLETATA CON SUCCESSO!
⏱️  Tempo totale Python: 136 secondi (0h 2m)

📋 REPORT FINALE PRODUZIONE
============================
⏱️  Tempo totale job: 256 secondi (0h 4m)
🔧 Versione Ollama: 0.3.14
📊 Modalità: Produzione completa (tutti gli utenti)
✅ Python success: true

📁 RISULTATI GENERATI:
/var/spool/slurmd/job19245755/slurm_script: line 337: 1312683 Terminated              monitor_progress
   📊 Total files: 1
   💾 Total size: 248K

   📋 File generati:
     -rw-r--r-- 1 smattiol interactive 242K Aug 21 15:36 results/veronacard_2022_original_pred_20250821_152008.csv

🔧 STATO FINALE SISTEMA:
memory.used [MiB], memory.total [MiB], utilization.gpu [%], temperature.gpu
25968 MiB, 65536 MiB, 0 %, 43

📊 LOG OLLAMA (ultimi 20 righe):
[GIN] 2025/08/21 - 15:56:30 | 200 |  2.992110624s |       127.0.0.1 | POST     "/api/chat"
[GIN] 2025/08/21 - 15:56:30 | 200 |    7.556425ms |       127.0.0.1 | GET      "/api/tags"
[GIN] 2025/08/21 - 15:56:32 | 200 |  1.754679974s |       127.0.0.1 | POST     "/api/chat"
[GIN] 2025/08/21 - 15:56:32 | 200 |    5.830404ms |       127.0.0.1 | GET      "/api/tags"
[GIN] 2025/08/21 - 15:56:35 | 200 |  2.334780683s |       127.0.0.1 | POST     "/api/chat"
[GIN] 2025/08/21 - 15:56:35 | 200 |   10.339101ms |       127.0.0.1 | GET      "/api/tags"
[GIN] 2025/08/21 - 15:56:37 | 200 |  1.969121206s |       127.0.0.1 | POST     "/api/chat"
[GIN] 2025/08/21 - 15:56:37 | 200 |    5.823365ms |       127.0.0.1 | GET      "/api/tags"
[GIN] 2025/08/21 - 15:56:39 | 200 |   2.60415162s |       127.0.0.1 | POST     "/api/chat"
[GIN] 2025/08/21 - 15:56:39 | 200 |   15.154206ms |       127.0.0.1 | GET      "/api/tags"
[GIN] 2025/08/21 - 15:56:41 | 200 |  2.024039478s |       127.0.0.1 | POST     "/api/chat"
[GIN] 2025/08/21 - 15:56:41 | 200 |    7.144274ms |       127.0.0.1 | GET      "/api/tags"
[GIN] 2025/08/21 - 15:56:44 | 200 |  2.741075857s |       127.0.0.1 | POST     "/api/chat"
[GIN] 2025/08/21 - 15:56:44 | 200 |    8.971516ms |       127.0.0.1 | GET      "/api/tags"
[GIN] 2025/08/21 - 15:56:46 | 200 |  1.835808345s |       127.0.0.1 | POST     "/api/chat"
[GIN] 2025/08/21 - 15:56:46 | 200 |     7.96705ms |       127.0.0.1 | GET      "/api/tags"
[GIN] 2025/08/21 - 15:56:48 | 200 |  2.462790275s |       127.0.0.1 | POST     "/api/chat"
[GIN] 2025/08/21 - 15:56:49 | 200 |   19.972586ms |       127.0.0.1 | GET      "/api/tags"
[GIN] 2025/08/21 - 15:56:50 | 200 |  1.206135957s |       127.0.0.1 | POST     "/api/chat"
[GIN] 2025/08/21 - 15:56:50 | 200 |    7.936113ms |       127.0.0.1 | GET      "/api/tags"

🎉 JOB PRODUZIONE COMPLETATO CON SUCCESSO!
✅ Tutti i dataset sono stati processati senza limiti utenti

🏁 Fine job: Thu Aug 21 15:56:51 CEST 2025
=============================================

🧹 CLEANUP PRODUZIONE...
🕐 Tempo totale job: 256 secondi (0h 4m)
📊 Stato GPU finale:
memory.used [MiB], memory.total [MiB], utilization.gpu [%], temperature.gpu
25968 MiB, 65536 MiB, 0 %, 43
📁 Risultati generati: 1 files
💾 Dimensione risultati: 248K
🔄 Shutdown graceful Ollama...
✓ Cleanup completato
