ğŸš€ VERONA CARD HPC OTTIMIZZATO
==============================
Job ID: 19280671
Nodo: lrdn0611.leonardo.local
Data: Sat Aug 23 07:59:02 CEST 2025
ğŸ¯ ModalitÃ : Produzione ottimizzata (4x A100, rate-limited)

ğŸ“¦ Setup ambiente HPC...
Loading python/3.11.6--gcc--8.5.0
  Loading requirement: bzip2/1.0.8-gp5wcz5 libmd/1.0.4-wja3f5q
    libbsd/0.11.7-cgxjopl expat/2.5.0-bptl3xw ncurses/6.4-asx3jea
    readline/8.2-nyw6mp6 gdbm/1.23-fs6otck libiconv/1.17-d7yvx2s
    xz/5.4.1-hubmwr5 zlib-ng/2.1.4-6htiapk libxml2/2.10.3-5eeeokp
    pigz/2.7-bopr5vp zstd/1.5.5-gawytfl tar/1.34-amqus5s gettext/0.22.3-2g7elif
    libffi/3.4.4-6r7brdq libxcrypt/4.4.35-ss2rzin sqlite/3.43.2
    util-linux-uuid/2.38.1-jkdi7kv
âœ… Python: Python 3.11.6
âœ… CUDA: Cuda compilation tools, release 12.3, V12.3.103

ğŸ” GPU DETECTION:
0, NVIDIA A100-SXM-64GB, 65536 MiB, 43
1, NVIDIA A100-SXM-64GB, 65536 MiB, 43
2, NVIDIA A100-SXM-64GB, 65536 MiB, 43
3, NVIDIA A100-SXM-64GB, 65536 MiB, 42
SLURM GPUs: 4

ğŸš€ Avvio server Ollama ottimizzato (4x GPU)...
ğŸ” Controllo stato GPU...
0, NVIDIA A100-SXM-64GB, 2 MiB, 43
1, NVIDIA A100-SXM-64GB, 2 MiB, 43
2, NVIDIA A100-SXM-64GB, 2 MiB, 43
3, NVIDIA A100-SXM-64GB, 2 MiB, 42
# gpu         pid  type    sm    mem    enc    dec    command
# Idx           #   C/G     %      %      %      %    name
    0          -     -     -     -     -     -   -              
    1          -     -     -     -     -     -   -              
    2          -     -     -     -     -     -   -              
    3          -     -     -     -     -     -   -              
ğŸ”¥ Avvio istanza GPU 0 su porta 39001...
âœ… GPU 0 PID: 961273
ğŸ”¥ Avvio istanza GPU 1 su porta 39002...
âœ… GPU 1 PID: 961303
ğŸ”¥ Avvio istanza GPU 2 su porta 39003...
âœ… GPU 2 PID: 961333
ğŸ”¥ Avvio istanza GPU 3 su porta 39004...
âœ… GPU 3 PID: 961360
âœ… Tutte le istanze avviate:
   GPU 0: PID 249 (porta 39001)
   GPU 1: PID 23 (porta 39002)
   GPU 2: PID 53 (porta 39003)
   GPU 3: PID 80 (porta 39004)

â³ Verifica health multi-istanza...
ğŸ” Check GPU 0 (porta 39001)...
âœ… GPU 0 operativa
ğŸ” Check GPU 1 (porta 39002)...
âœ… GPU 1 operativa
ğŸ” Check GPU 2 (porta 39003)...
âœ… GPU 2 operativa
ğŸ” Check GPU 3 (porta 39004)...
âœ… GPU 3 operativa
ğŸ“Š Health check: 4/4 istanze operative

ğŸ“¥ Preparazione modello su tutte le GPU...
ğŸ” Verifica modello mixtral:8x7b...
ğŸ”¥ Pre-caricamento distribuito...
âš¡ Warm-up GPU 0...
âš¡ Warm-up GPU 1...
âš¡ Warm-up GPU 2...
ğŸš¨ DEBUG: PIDs preload salvati: 961430 961431 961432 961434
â³ Attesa completamento preload (max 120s)...
âš¡ Warm-up GPU 3...
â³ Preload in corso... (4/4 attivi, 0s)
âœ… GPU 0 pronta
âœ… GPU 3 pronta
âœ… GPU 1 pronta
âœ… GPU 2 pronta
âœ… Tutti i preload completati in 12s
ğŸ” DEBUG: Stato finale preload:
  PID 961430: TERMINATO
  PID 961431: TERMINATO
  PID 961432: TERMINATO
  PID 961434: TERMINATO

ğŸ” DEBUG: Punto critico post warm-up
Timestamp: 2025-08-23 08:00:22
Uptime processo: 80 secondi
Directory corrente: /leonardo_work/IscrC_LLM-Mob/LLM-Mob-As-Mobility-Interpreter
Spazio disco disponibile: 10.128.82.1@o2ib:10.128.82.2@o2ib:/larchive/work  1.0T   90G  935G   9% /leonardo_work
Memoria disponibile:               total        used        free      shared  buff/cache   available
Mem:          502Gi       4.2Gi       492Gi        97Mi       5.9Gi       491Gi
Swap:            0B          0B          0B

ğŸ“‹ DEBUG: Verifica ambiente Python
File Python esiste: -rw-r--r-- 1 smattiol interactive 62275 Aug 22 22:32 veronacard_mob_with_geom_parrallel.py
Directory data: DIRECTORY NON TROVATA
File input: FILE NON TROVATO

ğŸ§ª DEBUG: Test Python veloce
Python path: /leonardo_work/IscrC_LLM-Mob/venv/bin/python3
âœ… Pandas OK
âœ… Requests OK
âœ… Python base OK

ğŸ” DEBUG: Stato processi Ollama
âŒ PID 249 terminato
âŒ PID 23 terminato
âŒ PID 53 terminato
âŒ PID 80 terminato

ğŸŒ DEBUG: Test connettivitÃ  finale
âœ… Porta 39001 risponde
âœ… Porta 39002 risponde
âœ… Porta 39003 risponde
âœ… Porta 39004 risponde

ğŸ¯ DEBUG: Inizio sezione Python
===============================================

ğŸ¯ AVVIO ELABORAZIONE OTTIMIZZATA
================================
ğŸ“Š Configurazione finale:
   ğŸ¯ GPU operative: 4/4
   âš¡ Rate limit: 4 richieste concurrent
   ğŸ’¾ Salvataggio incrementale: ogni 100 carte
   ğŸ”„ Timeout richiesta: 240s
   ğŸ›¡ï¸ Circuit breaker: attivo

ğŸ“ Directory dopo cd: /leonardo_work/IscrC_LLM-Mob/LLM-Mob-As-Mobility-Interpreter
ğŸ“ Contenuto directory:
total 7292
drwxr-xr-x 24 smattiol interactive      4096 Aug 23 07:59 .
drwxrwx--- 10 smattiol IscrC_LLM-Mob    4096 Aug 15 18:50 ..
drwxr-xr-x  2 smattiol interactive      4096 Aug 22 16:51 BACK UP FUNZIONANTE PARALLEL
drwxr-xr-x  6 smattiol interactive      4096 Aug 15 18:41 data
drwxr-xr-x  4 smattiol interactive      4096 Aug 20 09:58 DOCUMENTAZIONE UFFICIALE
-rw-r--r--  1 smattiol interactive      8196 Aug 15 18:41 .DS_Store
-rw-r--r--  1 smattiol interactive        29 Aug 22 14:52 fatti.tzt
drwxr-xr-x  5 smattiol interactive      4096 Aug 15 18:41 file llm-Mob
drwxr-xr-x  8 smattiol interactive      4096 Aug 22 15:55 .git
ğŸ“‚ Directory results creata: drwxr-xr-x 2 smattiol interactive 4096 Aug 22 23:27 results/
ğŸš€ Avvio script Python ottimizzato...
ğŸ“„ File target: veronacard_2023_original_parziale.csv
â° Timestamp inizio: 2025-08-23 08:00:40

ğŸ” DEBUG: Test comando Python (dry run)
âœ… Argomenti Python parsati correttamente
   File: veronacard_2020_2023/veronacard_2022_original.csv
   Append: False

ğŸ¬ INIZIO ESECUZIONE PYTHON REALE
- BACK UP FUNZIONANTE PARALLEL data DOCUMENTAZIONE UFFICIALE fatti.tzt file llm-Mob hpc_verona_optimized.log img LICENSE logs mini run con geometrie da MACBOOK notebook ollama_config.json ollama_gpu0.log ollama_gpu1.log ollama_gpu2.log ollama_gpu3.log ollama_info.txt ollama_models.txt ollama_ports.txt ollama_port.txt ollama_production.log PARALLEL MAX PERFORMANCE parallel_production_run_4_GPU.sh parallel_production_run.sh prima run di DEBUG with geom da Leonardo production_run.sh python_execution.log README.md requirements.txt result_run_completa_with_geom_srv_univr results results_2025_05_10_(_prima_run_su_srv_univr_LITE_) results_leo_with_geom_n-1_come_current_POI results_leo_with_geom_parziali results_parziali_ministral results semi-completi ministral results_short results_srv_univr_(_no_SPACE-GEO_n-1_come_current_POI_) slurm-19273279.out slurm-19273315.out slurm-19273358.out slurm-19273815.out slurm-19273934.out slurm-19280671.out venv veronacard_mob.py veronacard_mob_versione_base.py veronacard_mob_with_geom_parrallel.py veronacard_mob_with_geom.py 50
2025-08-23 08:01:08,284 INFO: ğŸ”¥ Configurazione multi-GPU: 4 istanze
2025-08-23 08:01:08,284 INFO: ğŸ¯ Configurazione caricata: 4 host
Controllo host 1/4: http://127.0.0.1:39001
Attesa Ollama su http://127.0.0.1:39001...
âœ“ http://127.0.0.1:39001 risponde con status 200
âœ“ http://127.0.0.1:39001 completamente attivo
Controllo host 2/4: http://127.0.0.1:39002
Attesa Ollama su http://127.0.0.1:39002...
âœ“ http://127.0.0.1:39002 risponde con status 200
âœ“ http://127.0.0.1:39002 completamente attivo
Controllo host 3/4: http://127.0.0.1:39003
Attesa Ollama su http://127.0.0.1:39003...
âœ“ http://127.0.0.1:39003 risponde con status 200
âœ“ http://127.0.0.1:39003 completamente attivo
Controllo host 4/4: http://127.0.0.1:39004
Attesa Ollama su http://127.0.0.1:39004...
âœ“ http://127.0.0.1:39004 risponde con status 200
âœ“ http://127.0.0.1:39004 completamente attivo
Tutti gli 4 host Ollama sono pronti!
ğŸ‰ Connessione Ollama stabilita con successo!
2025-08-23 08:01:08,388 INFO: Test http://127.0.0.1:39001...
2025-08-23 08:02:08,475 ERROR: http://127.0.0.1:39001 non funziona
2025-08-23 08:02:08,475 INFO: Test http://127.0.0.1:39002...
ğŸ“Š [08:02:43] Progress: 6 files (1 new), 44M total
ğŸ”§ [08:02:43] GPU Status:
   GPU0:    6MB  0%  43Â°C (idle?)
   GPU1:  482MB  0%  44Â°C (idle?)
   GPU2:    6MB  0%  43Â°C (idle?)
   GPU3:    6MB  0%  43Â°C (idle?)
---
2025-08-23 08:03:08,564 ERROR: http://127.0.0.1:39002 non funziona
2025-08-23 08:03:08,564 INFO: Test http://127.0.0.1:39003...
