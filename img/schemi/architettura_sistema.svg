<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="gpuGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#76b900;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#4e7a00;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="cpuGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0078d4;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#004b87;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
  </defs>
  
  <!-- Titolo -->
  <text x="600" y="40" font-family="Arial, sans-serif" font-size="28" font-weight="bold" text-anchor="middle" fill="#333">
    Architettura Sistema LLM-Mob su Leonardo HPC
  </text>
  
  <!-- Nodo HPC Leonardo -->
  <rect x="50" y="80" width="1100" height="200" rx="10" fill="#f0f0f0" stroke="#666" stroke-width="2" filter="url(#shadow)"/>
  <text x="600" y="110" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#333">
    Nodo Booster Leonardo
  </text>
  
  <!-- CPU -->
  <rect x="80" y="130" width="200" height="120" rx="5" fill="url(#cpuGradient)" filter="url(#shadow)"/>
  <text x="180" y="160" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">
    2×56 CPU Cores
  </text>
  <text x="180" y="185" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white">
    Intel Sapphire
  </text>
  <text x="180" y="205" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white">
    Rapids @ 2GHz
  </text>
  
  <!-- RAM -->
  <rect x="320" y="130" width="200" height="120" rx="5" fill="#ff6b6b" filter="url(#shadow)"/>
  <text x="420" y="175" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="white">
    512 GB RAM
  </text>
  <text x="420" y="205" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white">
    DDR5
  </text>
  
  <!-- GPUs -->
  <g id="gpu-group">
    <rect x="560" y="130" width="140" height="120" rx="5" fill="url(#gpuGradient)" filter="url(#shadow)"/>
    <text x="630" y="165" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">
      GPU 0
    </text>
    <text x="630" y="185" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white">
      A100
    </text>
    <text x="630" y="205" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white">
      64GB
    </text>
  </g>
  
  <use href="#gpu-group" x="160" y="0"/>
  <text x="790" y="165" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">GPU 1</text>
  
  <use href="#gpu-group" x="320" y="0"/>
  <text x="950" y="165" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">GPU 2</text>
  
  <use href="#gpu-group" x="480" y="0"/>
  <text x="1110" y="165" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">GPU 3</text>
  
  <!-- Frecce di connessione -->
  <path d="M 630 250 L 630 320" stroke="#666" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 790 250 L 790 320" stroke="#666" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 950 250 L 950 320" stroke="#666" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 1110 250 L 1110 320" stroke="#666" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Marker per frecce -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>
  
  <!-- Ollama Instances -->
  <rect x="50" y="330" width="1100" height="150" rx="10" fill="#e8f4f8" stroke="#0078d4" stroke-width="2" filter="url(#shadow)"/>
  <text x="600" y="360" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#0078d4">
    Istanze Ollama (Mixtral 8x7B)
  </text>
  
  <!-- Ollama Instance boxes -->
  <g id="ollama-instance">
    <rect x="560" y="380" width="140" height="80" rx="5" fill="#4a90e2" filter="url(#shadow)"/>
    <text x="630" y="405" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
      Ollama
    </text>
    <text x="630" y="425" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
      Port: 11434
    </text>
    <text x="630" y="445" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
      GPU: 0
    </text>
  </g>
  
  <use href="#ollama-instance" x="-480" y="0"/>
  <text x="150" y="425" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">Port: 11434</text>
  
  <use href="#ollama-instance" x="-320" y="0"/>
  <text x="310" y="425" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">Port: 11435</text>
  
  <use href="#ollama-instance" x="-160" y="0"/>
  <text x="470" y="425" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">Port: 11436</text>
  
  <use href="#ollama-instance" x="160" y="0"/>
  <text x="790" y="425" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">Port: 11435</text>
  
  <use href="#ollama-instance" x="320" y="0"/>
  <text x="950" y="425" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">Port: 11436</text>
  
  <use href="#ollama-instance" x="480" y="0"/>
  <text x="1110" y="425" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">Port: 11437</text>
  
  <!-- Sistema di Orchestrazione -->
  <rect x="50" y="510" width="1100" height="250" rx="10" fill="#fff4e6" stroke="#ff6b6b" stroke-width="2" filter="url(#shadow)"/>
  <text x="600" y="540" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#ff6b6b">
    Sistema di Orchestrazione Python
  </text>
  
  <!-- Componenti del sistema -->
  <!-- Health Monitor -->
  <rect x="80" y="570" width="250" height="160" rx="5" fill="#28a745" filter="url(#shadow)"/>
  <text x="205" y="600" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">
    Health Monitor
  </text>
  <text x="205" y="625" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
    • Monitoraggio host
  </text>
  <text x="205" y="645" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
    • Response time tracking
  </text>
  <text x="205" y="665" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
    • Load balancing
  </text>
  <text x="205" y="685" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
    • Failover automatico
  </text>
  
  <!-- Circuit Breaker -->
  <rect x="360" y="570" width="250" height="160" rx="5" fill="#dc3545" filter="url(#shadow)"/>
  <text x="485" y="600" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">
    Circuit Breaker
  </text>
  <text x="485" y="625" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
    • Stati: CLOSED/OPEN/HALF
  </text>
  <text x="485" y="645" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
    • Protezione cascading
  </text>
  <text x="485" y="665" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
    • Timeout configurabile
  </text>
  <text x="485" y="685" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
    • Reset automatico
  </text>
  
  <!-- Checkpoint Manager -->
  <rect x="640" y="570" width="250" height="160" rx="5" fill="#6610f2" filter="url(#shadow)"/>
  <text x="765" y="600" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">
    Checkpoint Manager
  </text>
  <text x="765" y="625" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
    • Salvataggio stato
  </text>
  <text x="765" y="645" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
    • Ripresa interruzioni
  </text>
  <text x="765" y="665" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
    • Skip file completati
  </text>
  <text x="765" y="685" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
    • Gestione incrementale
  </text>
  
  <!-- Rate Limiter -->
  <rect x="920" y="570" width="200" height="160" rx="5" fill="#fd7e14" filter="url(#shadow)"/>
  <text x="1020" y="600" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">
    Rate Limiter
  </text>
  <text x="1020" y="625" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
    • Semaforo dinamico
  </text>
  <text x="1020" y="645" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
    • 16 req concurrent
  </text>
  <text x="1020" y="665" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
    • Backoff esponenziale
  </text>
  <text x="1020" y="685" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
    • Queue management
  </text>
</svg>